

<h1>Books</h1>

<h3>Search Books</h3>

<h4>Search Books by title</h4>
<%= form_with(scope: :search, url: books_path, method: 'get', local: true) do |form| %>
  <%= form.label :name %>
  <%= form.text_field :name %>
  <%= form.select :search_type, ['book', 'author', 'genre'] %>
  <%= form.submit 'Search'  %>
<% end %>

<% @books.each do |book| %>
  <%= book.name %>
  <%= book.description %>
  <%= book.price %>
  <%= book.genre_id %>
  <%= link_to 'Show', book %>
  
  
  <% if current_user && current_user.admin? %>
    <%= link_to 'Edit', edit_book_path(book) %>
    <%= link_to 'Destroy', book, method: :delete, data: { confirm: 'Are you sure?' } %>
  <% elsif current_user && current_user.id == book.user_id %>
    <%= link_to 'Edit', edit_book_path(book) %>
  <% end %>
  <br>

  <%= form_with model: @order_item do |form| %>
    <%= form.hidden_field :book_id, value: book.id %>
    <%= form.number_field :quantity, value: 1, min: 1 %>
    <%= form.submit "Add to Cart" %>
  <% end %>
<% end %>

<br>

<%= link_to 'New Book', new_book_path %>
