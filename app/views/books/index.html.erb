<p id="notice"><%= notice %></p>

<h1>Books</h1>

<h3>Search Books</h3>

<h4>Search Books by title</h4>
<%= form_with(scope: :search, url: books_path, method: 'get', local: true) do |form| %>
  <%= form.label :name %>
  <%= form.text_field :name %>
  <%= form.submit 'Search'  %>
<% end %>

<% @books.each do |book| %>
  <%= book.name %>
  <%= book.description %>
  <%= book.price %>
  <%= book.genre_id %>
  <%= link_to 'Show', book %>
  
  
  <% if current_user.admin? %>
    <%= link_to 'Edit', edit_book_path(book) %>
    <%= link_to 'Destroy', book, method: :delete, data: { confirm: 'Are you sure?' } %>
  <% elsif current_user && current_user.id == book.user_id %>
    <%= link_to 'Edit', edit_book_path(book) %>
  <% end %>
  <br>
<% end %>

<br>

<%= link_to 'New Book', new_book_path %>
